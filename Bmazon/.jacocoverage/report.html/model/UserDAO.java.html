<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>UserDAO.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;Bmazon&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">model</a> &gt; <span class="el_source">UserDAO.java</span></div><h1>UserDAO.java</h1><pre class="source lang-java linenums">/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package model;

import entity.Role;
import entity.Seller;
import entity.User;
import java.sql.Date;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author Admin
 */
<span class="fc" id="L26">public class UserDAO extends BaseDAO {</span>

<span class="fc" id="L28">    BaseDAO dbConn = new BaseDAO();</span>

    public static void main(String[] args) {
<span class="fc" id="L31">        System.out.println(&quot;addUserRegister&quot;);</span>
<span class="fc" id="L32">        UserDAO dao = new UserDAO();</span>
<span class="fc" id="L33">        int expResult = 1;</span>
<span class="fc" id="L34">        System.out.println(dao.addUserRegister(new User(null, &quot;123456&quot;, &quot;123&quot;, &quot;askdf@gmail.com&quot;, &quot;0988907272&quot;, 1, 100, &quot;Nguyen Viet&quot;, &quot;Public name&quot;, &quot;GIa Loc&quot;, &quot;image.jpg&quot;, &quot;lol.jpg&quot;, &quot;SE&quot;, 1, Date.valueOf(&quot;2001-04-03&quot;), &quot;okok&quot;, &quot;fb&quot;, &quot;ins&quot;, &quot;fe&quot;, &quot;yt&quot;, 1, 1, 1)));</span>
<span class="fc" id="L35">        System.out.println(dao.addUserRegister(new User(&quot;Khanh&quot;, &quot;123456&quot;, &quot;123&quot;, &quot;asf@gmail.com&quot;, &quot;0988907272&quot;, 1, 100, &quot;Nguyen Viet&quot;, &quot;Public name&quot;, &quot;GIa Loc&quot;, &quot;image.jpg&quot;, &quot;lol.jpg&quot;, &quot;SE&quot;, 1, Date.valueOf(&quot;2001-04-03&quot;), &quot;okok&quot;, &quot;fb&quot;, &quot;ins&quot;, &quot;fe&quot;, &quot;yt&quot;, 1, 1, 1)));</span>
        
        
<span class="fc" id="L38">    }</span>
    
    public int addUserRegister(User obj) {
<span class="fc" id="L41">        int n = 0;</span>
<span class="fc" id="L42">        String sql = &quot;INSERT INTO [User](username, password, email, phoneNumber, sell, wallet, fullname, publicName, address,&quot;</span>
                + &quot; profileImage, backgroundImage, occupation, gender, DOB, bio, Facebook, Instagram, Twitter, Youtube,&quot;
                + &quot; activityPoint, systemRole, status)&quot;
                + &quot; values (?,?,?,?,?,?,?,?,?,?,?,?,?,GETDATE(),?,?,?,?,?,?,?,?)&quot;;
        try {
<span class="fc" id="L47">            pre = conn.prepareStatement(sql);</span>
<span class="fc" id="L48">            pre.setString(1, obj.getUsername());</span>
<span class="fc" id="L49">            pre.setString(2, obj.getPassword());</span>
<span class="fc" id="L50">            pre.setString(3, obj.getEmail());</span>
<span class="fc" id="L51">            pre.setString(4, obj.getPhoneNumber());</span>
<span class="fc" id="L52">            pre.setInt(5, obj.getSell());</span>
<span class="fc" id="L53">            pre.setDouble(6, obj.getWallet());</span>
<span class="fc" id="L54">            pre.setString(7, obj.getFullname());</span>
<span class="fc" id="L55">            pre.setString(8, obj.getPublicName());</span>
<span class="fc" id="L56">            pre.setString(9, obj.getAddress());</span>
<span class="fc" id="L57">            pre.setString(10, obj.getProfileImage());</span>
<span class="fc" id="L58">            pre.setString(11, obj.getBackgroundImage());</span>
<span class="fc" id="L59">            pre.setString(12, obj.getOccupation());</span>
<span class="fc" id="L60">            pre.setInt(13, obj.getGender());</span>
<span class="fc" id="L61">            pre.setString(14, obj.getBio());</span>
<span class="fc" id="L62">            pre.setString(15, obj.getFacebook());</span>
<span class="fc" id="L63">            pre.setString(16, obj.getInstagram());</span>
<span class="fc" id="L64">            pre.setString(17, obj.getTwitter());</span>
<span class="fc" id="L65">            pre.setString(18, obj.getYoutube());</span>
<span class="fc" id="L66">            pre.setInt(19, obj.getActivityPoint());</span>
<span class="fc" id="L67">            pre.setInt(20, obj.getSystemRole());</span>
<span class="fc" id="L68">            pre.setInt(21, obj.getStatus());</span>
<span class="fc" id="L69">            n = pre.executeUpdate();</span>
<span class="fc" id="L70">        } catch (SQLException ex) {</span>
<span class="fc" id="L71">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L72">        }</span>
<span class="fc" id="L73">        return n;</span>
    }

    public int addUser(User obj) {
<span class="fc" id="L77">        int n = 0;</span>
<span class="fc" id="L78">        String sql = &quot;INSERT INTO [User](username, password, email, phoneNumber, sell, wallet, fullname, publicName, address,&quot;</span>
                + &quot; profileImage, backgroundImage, occupation, gender, DOB, bio, Facebook, Instagram, Twitter, Youtube,&quot;
                + &quot; activityPoint, systemRole, status)&quot;
                + &quot; values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)&quot;;
        try {
<span class="fc" id="L83">            pre = conn.prepareStatement(sql);</span>
<span class="nc" id="L84">            pre.setString(1, obj.getUsername());</span>
<span class="nc" id="L85">            pre.setString(2, obj.getPassword());</span>
<span class="nc" id="L86">            pre.setString(3, obj.getEmail());</span>
<span class="nc" id="L87">            pre.setString(4, obj.getPhoneNumber());</span>
<span class="nc" id="L88">            pre.setInt(5, obj.getSell());</span>
<span class="nc" id="L89">            pre.setDouble(6, obj.getWallet());</span>
<span class="nc" id="L90">            pre.setString(7, obj.getFullname());</span>
<span class="nc" id="L91">            pre.setString(8, obj.getPublicName());</span>
<span class="nc" id="L92">            pre.setString(9, obj.getAddress());</span>
<span class="nc" id="L93">            pre.setString(10, obj.getProfileImage());</span>
<span class="nc" id="L94">            pre.setString(11, obj.getBackgroundImage());</span>
<span class="nc" id="L95">            pre.setString(12, obj.getOccupation());</span>
<span class="nc" id="L96">            pre.setInt(13, obj.getGender());</span>
<span class="nc" id="L97">            pre.setDate(14, obj.getDOB());</span>
<span class="nc" id="L98">            pre.setString(15, obj.getBio());</span>
<span class="nc" id="L99">            pre.setString(16, obj.getFacebook());</span>
<span class="nc" id="L100">            pre.setString(17, obj.getInstagram());</span>
<span class="nc" id="L101">            pre.setString(18, obj.getTwitter());</span>
<span class="nc" id="L102">            pre.setString(19, obj.getYoutube());</span>
<span class="nc" id="L103">            pre.setInt(20, obj.getActivityPoint());</span>
<span class="nc" id="L104">            pre.setInt(21, obj.getSystemRole());</span>
<span class="nc" id="L105">            pre.setInt(22, obj.getStatus());</span>
<span class="nc" id="L106">            n = pre.executeUpdate();</span>
<span class="nc" id="L107">        } catch (SQLException ex) {</span>
<span class="nc" id="L108">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="nc" id="L109">        }</span>
<span class="nc" id="L110">        return n;</span>
    }

    public int changePassword(String username, String newPass) {
        try {
<span class="fc" id="L115">            String sqlUpdate = &quot;Update [User] set password = ? where username = ?&quot;;</span>
<span class="fc" id="L116">            pre = conn.prepareStatement(sqlUpdate);</span>
<span class="fc" id="L117">            pre.setString(1, newPass);</span>
<span class="fc" id="L118">            pre.setString(2, username);</span>
<span class="fc" id="L119">            int n = pre.executeUpdate();</span>
<span class="fc" id="L120">            return n;</span>
<span class="nc" id="L121">        } catch (SQLException ex) {</span>
<span class="nc" id="L122">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
        }
<span class="nc" id="L124">        return 0;</span>
    }

    public int changeStatus(String username, int status) {
<span class="fc" id="L128">        int n = 0;</span>
<span class="fc" id="L129">        String sql = &quot;UPDATE [User] SET status = ? WHERE username = ?&quot;;</span>
        try {
<span class="fc" id="L131">            pre = conn.prepareStatement(sql);</span>
<span class="pc bpc" id="L132" title="1 of 2 branches missed.">            pre.setInt(1, (status == 1 ? 1 : 0));</span>
<span class="fc" id="L133">            pre.setString(2, username);</span>
<span class="fc" id="L134">            n = pre.executeUpdate();</span>
<span class="nc" id="L135">        } catch (SQLException ex) {</span>
<span class="nc" id="L136">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L137">        }</span>
<span class="fc" id="L138">        return n;</span>
    }

    public int changeStatus(int id, int status) {
<span class="fc" id="L142">        int n = 0;</span>
<span class="fc" id="L143">        String sql = &quot;UPDATE [User] SET status = ? WHERE userID = ?&quot;;</span>
        try {
<span class="fc" id="L145">            pre = conn.prepareStatement(sql);</span>
<span class="pc bpc" id="L146" title="1 of 2 branches missed.">            pre.setInt(1, (status == 1 ? 1 : 0));</span>
<span class="fc" id="L147">            pre.setInt(2, id);</span>
<span class="fc" id="L148">            n = pre.executeUpdate();</span>
<span class="nc" id="L149">        } catch (SQLException ex) {</span>
<span class="nc" id="L150">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L151">        }</span>
<span class="fc" id="L152">        return n;</span>
    }

    public int removeUser(int id) {
<span class="fc" id="L156">        int n = 0;</span>
<span class="fc" id="L157">        String sql = &quot;DELETE [User] WHERE userID = ?&quot;;</span>
        try {
<span class="fc" id="L159">            pre = conn.prepareStatement(sql);</span>
<span class="fc" id="L160">            pre.setInt(1, id);</span>
<span class="fc" id="L161">            n = pre.executeUpdate();</span>
<span class="nc" id="L162">        } catch (SQLException ex) {</span>
<span class="nc" id="L163">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L164">        }</span>
<span class="fc" id="L165">        return n;</span>
    }

    public boolean checkExistUserName(String username) {
<span class="fc" id="L169">        String sql = &quot;SELECT * FROM [User] WHERE username = '&quot; + username + &quot;'&quot;;</span>
<span class="fc" id="L170">        ResultSet rs = dbConn.getData(sql);</span>
        try {
<span class="pc bpc" id="L172" title="1 of 2 branches missed.">            if (rs.next()) {</span>
<span class="nc" id="L173">                return true;</span>
            }
<span class="nc" id="L175">        } catch (SQLException ex) {</span>
<span class="nc" id="L176">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L177">        }</span>
<span class="fc" id="L178">        return false;</span>
    }

    public boolean checkExistPhone(String phone) {
<span class="fc" id="L182">        String sql = &quot;SELECT * FROM [User] WHERE phoneNumber = '&quot; + phone + &quot;'&quot;;</span>
<span class="fc" id="L183">        ResultSet rs = dbConn.getData(sql);</span>
        try {
<span class="pc bpc" id="L185" title="1 of 2 branches missed.">            if (rs.next()) {</span>
<span class="nc" id="L186">                return true;</span>
            }
<span class="nc" id="L188">        } catch (SQLException ex) {</span>
<span class="nc" id="L189">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L190">        }</span>
<span class="fc" id="L191">        return false;</span>
    }

    public boolean checkExistMail(String mail) {
<span class="fc" id="L195">        String sql = &quot;SELECT * FROM [User] WHERE email = '&quot; + mail + &quot;'&quot;;</span>
<span class="fc" id="L196">        ResultSet rs = dbConn.getData(sql);</span>
        try {
<span class="pc bpc" id="L198" title="1 of 2 branches missed.">            if (rs.next()) {</span>
<span class="nc" id="L199">                return true;</span>
            }
<span class="nc" id="L201">        } catch (SQLException ex) {</span>
<span class="nc" id="L202">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L203">        }</span>
<span class="fc" id="L204">        return false;</span>
    }

    public boolean checkExistUserNameAndMail(String username, String mail) {
<span class="fc" id="L208">        String sql = &quot;SELECT * FROM [User] WHERE username = '&quot; + username + &quot;' and email = '&quot; + mail + &quot;' and status = 1&quot;;</span>
<span class="fc" id="L209">        ResultSet rs = dbConn.getData(sql);</span>
        try {
<span class="pc bpc" id="L211" title="1 of 2 branches missed.">            if (rs.next()) {</span>
<span class="nc" id="L212">                return true;</span>
            }
<span class="nc" id="L214">        } catch (SQLException ex) {</span>
<span class="nc" id="L215">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L216">        }</span>
<span class="fc" id="L217">        return false;</span>
    }

    public int getPageNumber(String search) {
<span class="fc" id="L221">        int num = 0;</span>
<span class="fc" id="L222">        String xSql = &quot;SELECT COUNT(*) FROM [Bmazon].[dbo].[User] where fullname like '%&quot; + search + &quot;%' or email like '%&quot; + search + &quot;%' or phoneNumber like '%&quot; + search + &quot;%' or address like '%&quot; + search + &quot;%'&quot;;</span>
<span class="fc" id="L223">        ResultSet rs = dbConn.getData(xSql);</span>
        try {
<span class="pc bpc" id="L225" title="1 of 2 branches missed.">            if (rs.next()) {</span>
<span class="fc" id="L226">                num = rs.getInt(1);</span>
            }
<span class="nc" id="L228">        } catch (SQLException ex) {</span>
<span class="nc" id="L229">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L230">        }</span>
<span class="fc" id="L231">        return num;</span>
    }

    public ArrayList&lt;User&gt; getAllPagingUser(int index, int numOfRow, String search) {
<span class="fc" id="L235">        ArrayList&lt;User&gt; list = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L236">        String xSql = &quot;declare @PageNo INT =&quot; + index + &quot;\n&quot;</span>
                + &quot;declare @PageSize INT=&quot; + numOfRow + &quot;\n&quot;
                + &quot;SELECT * from(\n&quot;
                + &quot;SELECT *,\n&quot;
                + &quot;ROW_NUMBER() over (order by userID) as RowNum\n&quot;
                + &quot;  FROM [Bmazon].[dbo].[User] where fullname like '%&quot; + search + &quot;%' or email like '%&quot; + search + &quot;%' or phoneNumber like '%&quot; + search + &quot;%'\n&quot;
                + &quot;  or address like '%&quot; + search + &quot;%')T\n&quot;
                + &quot;where T.RowNum between ((@PageNo-1)*@PageSize)+1 and (@PageNo*@PageSize)&quot;;
<span class="fc" id="L244">        ResultSet rs = dbConn.getData(xSql);</span>
        try {
<span class="pc bpc" id="L246" title="1 of 2 branches missed.">            while (rs.next()) {</span>
<span class="nc" id="L247">                User user = new User(rs.getString(&quot;userID&quot;), rs.getString(&quot;username&quot;),</span>
<span class="nc" id="L248">                        rs.getString(&quot;password&quot;), rs.getString(&quot;email&quot;),</span>
<span class="nc" id="L249">                        rs.getString(&quot;phoneNumber&quot;), rs.getInt(&quot;sell&quot;),</span>
<span class="nc" id="L250">                        rs.getDouble(&quot;wallet&quot;), rs.getString(&quot;fullname&quot;),</span>
<span class="nc" id="L251">                        rs.getString(&quot;publicName&quot;), rs.getString(&quot;address&quot;), rs.getString(&quot;profileImage&quot;),</span>
<span class="nc" id="L252">                        rs.getString(&quot;backgroundImage&quot;), rs.getString(&quot;occupation&quot;),</span>
<span class="nc" id="L253">                        rs.getInt(&quot;gender&quot;), rs.getDate(&quot;DOB&quot;), rs.getString(&quot;bio&quot;),</span>
<span class="nc" id="L254">                        rs.getString(&quot;Facebook&quot;), rs.getString(&quot;Instagram&quot;),</span>
<span class="nc" id="L255">                        rs.getString(&quot;Twitter&quot;), rs.getString(&quot;Youtube&quot;),</span>
<span class="nc" id="L256">                        rs.getInt(&quot;activityPoint&quot;), rs.getInt(&quot;systemRole&quot;),</span>
<span class="nc" id="L257">                        rs.getInt(&quot;status&quot;));</span>
<span class="nc" id="L258">                list.add(user);</span>
<span class="nc" id="L259">            }</span>
<span class="nc" id="L260">        } catch (SQLException ex) {</span>
<span class="nc" id="L261">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L262">        }</span>
<span class="fc" id="L263">        return list;</span>
    }

    public User getUserByUsername(String username) {
<span class="fc" id="L267">        String sql = &quot;SELECT * FROM [User] WHERE username = '&quot; + username + &quot;' and status=1&quot;;</span>
<span class="fc" id="L268">        ResultSet rs = dbConn.getData(sql);</span>
        try {
<span class="pc bpc" id="L270" title="1 of 2 branches missed.">            if (rs.next()) {</span>
<span class="nc" id="L271">                User user = new User(rs.getString(&quot;userID&quot;), rs.getString(&quot;username&quot;),</span>
<span class="nc" id="L272">                        rs.getString(&quot;password&quot;), rs.getString(&quot;email&quot;),</span>
<span class="nc" id="L273">                        rs.getString(&quot;phoneNumber&quot;), rs.getInt(&quot;sell&quot;),</span>
<span class="nc" id="L274">                        rs.getDouble(&quot;wallet&quot;), rs.getString(&quot;fullname&quot;),</span>
<span class="nc" id="L275">                        rs.getString(&quot;publicName&quot;), rs.getString(&quot;address&quot;), rs.getString(&quot;profileImage&quot;),</span>
<span class="nc" id="L276">                        rs.getString(&quot;backgroundImage&quot;), rs.getString(&quot;occupation&quot;),</span>
<span class="nc" id="L277">                        rs.getInt(&quot;gender&quot;), rs.getDate(&quot;DOB&quot;), rs.getString(&quot;bio&quot;),</span>
<span class="nc" id="L278">                        rs.getString(&quot;Facebook&quot;), rs.getString(&quot;Instagram&quot;),</span>
<span class="nc" id="L279">                        rs.getString(&quot;Twitter&quot;), rs.getString(&quot;Youtube&quot;),</span>
<span class="nc" id="L280">                        rs.getInt(&quot;activityPoint&quot;), rs.getInt(&quot;systemRole&quot;),</span>
<span class="nc" id="L281">                        rs.getInt(&quot;status&quot;));</span>
<span class="nc" id="L282">                return user;</span>
            }
<span class="nc" id="L284">        } catch (SQLException ex) {</span>
<span class="nc" id="L285">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L286">        }</span>
<span class="fc" id="L287">        return null;</span>
    }

    public User getUserById(String id) {
<span class="fc" id="L291">        String sql = &quot;SELECT * FROM [User] WHERE userID = '&quot; + id + &quot;'&quot;;</span>
<span class="fc" id="L292">        ResultSet rs = dbConn.getData(sql);</span>
        try {
<span class="fc bfc" id="L294" title="All 2 branches covered.">            if (rs.next()) {</span>
<span class="fc" id="L295">                User user = new User(rs.getString(&quot;userID&quot;), rs.getString(&quot;username&quot;),</span>
<span class="fc" id="L296">                        rs.getString(&quot;password&quot;), rs.getString(&quot;email&quot;),</span>
<span class="fc" id="L297">                        rs.getString(&quot;phoneNumber&quot;), rs.getInt(&quot;sell&quot;),</span>
<span class="fc" id="L298">                        rs.getDouble(&quot;wallet&quot;), rs.getString(&quot;fullname&quot;),</span>
<span class="fc" id="L299">                        rs.getString(&quot;publicName&quot;), rs.getString(&quot;address&quot;), rs.getString(&quot;profileImage&quot;),</span>
<span class="fc" id="L300">                        rs.getString(&quot;backgroundImage&quot;), rs.getString(&quot;occupation&quot;),</span>
<span class="fc" id="L301">                        rs.getInt(&quot;gender&quot;), rs.getDate(&quot;DOB&quot;), rs.getString(&quot;bio&quot;),</span>
<span class="fc" id="L302">                        rs.getString(&quot;Facebook&quot;), rs.getString(&quot;Instagram&quot;),</span>
<span class="fc" id="L303">                        rs.getString(&quot;Twitter&quot;), rs.getString(&quot;Youtube&quot;),</span>
<span class="fc" id="L304">                        rs.getInt(&quot;activityPoint&quot;), rs.getInt(&quot;systemRole&quot;),</span>
<span class="fc" id="L305">                        rs.getInt(&quot;status&quot;));</span>
<span class="fc" id="L306">                return user;</span>
            }
<span class="nc" id="L308">        } catch (SQLException ex) {</span>
<span class="nc" id="L309">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L310">        }</span>
<span class="fc" id="L311">        return null;</span>
    }

    public User getUserBySellerId(Seller s) {
<span class="nc" id="L315">        String sql = &quot;select * from [User] WHERE userID = &quot; + s.getUserID();</span>
<span class="nc" id="L316">        ResultSet rs = dbConn.getData(sql);</span>
        try {
<span class="nc bnc" id="L318" title="All 2 branches missed.">            if (rs.next()) {</span>
<span class="nc" id="L319">                User user = new User(rs.getString(&quot;userID&quot;), rs.getString(&quot;username&quot;),</span>
<span class="nc" id="L320">                        rs.getString(&quot;password&quot;), rs.getString(&quot;email&quot;),</span>
<span class="nc" id="L321">                        rs.getString(&quot;phoneNumber&quot;), rs.getInt(&quot;sell&quot;),</span>
<span class="nc" id="L322">                        rs.getDouble(&quot;wallet&quot;), rs.getString(&quot;fullname&quot;),</span>
<span class="nc" id="L323">                        rs.getString(&quot;publicName&quot;), rs.getString(&quot;address&quot;), rs.getString(&quot;profileImage&quot;),</span>
<span class="nc" id="L324">                        rs.getString(&quot;backgroundImage&quot;), rs.getString(&quot;occupation&quot;),</span>
<span class="nc" id="L325">                        rs.getInt(&quot;gender&quot;), rs.getDate(&quot;DOB&quot;), rs.getString(&quot;bio&quot;),</span>
<span class="nc" id="L326">                        rs.getString(&quot;Facebook&quot;), rs.getString(&quot;Instagram&quot;),</span>
<span class="nc" id="L327">                        rs.getString(&quot;Twitter&quot;), rs.getString(&quot;Youtube&quot;),</span>
<span class="nc" id="L328">                        rs.getInt(&quot;activityPoint&quot;), rs.getInt(&quot;systemRole&quot;),</span>
<span class="nc" id="L329">                        rs.getInt(&quot;status&quot;));</span>
<span class="nc" id="L330">                return user;</span>
            }
<span class="nc" id="L332">        } catch (SQLException ex) {</span>
<span class="nc" id="L333">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="nc" id="L334">        }</span>
<span class="nc" id="L335">        return null;</span>
    }
    
    public ArrayList&lt;User&gt; getAllUser() {
<span class="fc" id="L339">        ArrayList&lt;User&gt; list = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L340">        String sql = &quot;SELECT * FROM [User] where status=1&quot;;</span>
<span class="fc" id="L341">        ResultSet rs = dbConn.getData(sql);</span>
        try {
<span class="fc bfc" id="L343" title="All 2 branches covered.">            while (rs.next()) {</span>
<span class="fc" id="L344">                User user = new User(rs.getString(&quot;userID&quot;), rs.getString(&quot;username&quot;),</span>
<span class="fc" id="L345">                        rs.getString(&quot;password&quot;), rs.getString(&quot;email&quot;),</span>
<span class="fc" id="L346">                        rs.getString(&quot;phoneNumber&quot;), rs.getInt(&quot;sell&quot;),</span>
<span class="fc" id="L347">                        rs.getDouble(&quot;wallet&quot;), rs.getString(&quot;fullname&quot;),</span>
<span class="fc" id="L348">                        rs.getString(&quot;publicName&quot;), rs.getString(&quot;address&quot;), rs.getString(&quot;profileImage&quot;),</span>
<span class="fc" id="L349">                        rs.getString(&quot;backgroundImage&quot;), rs.getString(&quot;occupation&quot;),</span>
<span class="fc" id="L350">                        rs.getInt(&quot;gender&quot;), rs.getDate(&quot;DOB&quot;), rs.getString(&quot;bio&quot;),</span>
<span class="fc" id="L351">                        rs.getString(&quot;Facebook&quot;), rs.getString(&quot;Instagram&quot;),</span>
<span class="fc" id="L352">                        rs.getString(&quot;Twitter&quot;), rs.getString(&quot;Youtube&quot;),</span>
<span class="fc" id="L353">                        rs.getInt(&quot;activityPoint&quot;), rs.getInt(&quot;systemRole&quot;),</span>
<span class="fc" id="L354">                        rs.getInt(&quot;status&quot;));</span>
<span class="fc" id="L355">                list.add(user);</span>
<span class="fc" id="L356">            }</span>
<span class="nc" id="L357">        } catch (SQLException ex) {</span>
<span class="nc" id="L358">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L359">        }</span>
<span class="fc" id="L360">        return list;</span>
    }

    public ArrayList&lt;User&gt; getTrueUser() {
<span class="fc" id="L364">        ArrayList&lt;User&gt; list = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L365">        String sql = &quot;SELECT * FROM [User]&quot;;</span>
<span class="fc" id="L366">        ResultSet rs = dbConn.getData(sql);</span>
        try {
<span class="fc bfc" id="L368" title="All 2 branches covered.">            while (rs.next()) {</span>
<span class="fc" id="L369">                User user = new User(rs.getString(&quot;userID&quot;), rs.getString(&quot;username&quot;),</span>
<span class="fc" id="L370">                        rs.getString(&quot;password&quot;), rs.getString(&quot;email&quot;),</span>
<span class="fc" id="L371">                        rs.getString(&quot;phoneNumber&quot;), rs.getInt(&quot;sell&quot;),</span>
<span class="fc" id="L372">                        rs.getDouble(&quot;wallet&quot;), rs.getString(&quot;fullname&quot;),</span>
<span class="fc" id="L373">                        rs.getString(&quot;publicName&quot;), rs.getString(&quot;address&quot;), rs.getString(&quot;profileImage&quot;),</span>
<span class="fc" id="L374">                        rs.getString(&quot;backgroundImage&quot;), rs.getString(&quot;occupation&quot;),</span>
<span class="fc" id="L375">                        rs.getInt(&quot;gender&quot;), rs.getDate(&quot;DOB&quot;), rs.getString(&quot;bio&quot;),</span>
<span class="fc" id="L376">                        rs.getString(&quot;Facebook&quot;), rs.getString(&quot;Instagram&quot;),</span>
<span class="fc" id="L377">                        rs.getString(&quot;Twitter&quot;), rs.getString(&quot;Youtube&quot;),</span>
<span class="fc" id="L378">                        rs.getInt(&quot;activityPoint&quot;), rs.getInt(&quot;systemRole&quot;),</span>
<span class="fc" id="L379">                        rs.getInt(&quot;status&quot;));</span>
<span class="fc" id="L380">                list.add(user);</span>
<span class="fc" id="L381">            }</span>
<span class="nc" id="L382">        } catch (SQLException ex) {</span>
<span class="nc" id="L383">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L384">        }</span>
<span class="fc" id="L385">        return list;</span>
    }

    public ArrayList&lt;User&gt; getSearchUser(int uId, String uName, int status) {
<span class="fc" id="L389">        ArrayList&lt;User&gt; list = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L390">        String s1 = &quot; &quot;;</span>
<span class="pc bpc" id="L391" title="1 of 2 branches missed.">        if (uId != 0) {</span>
<span class="nc" id="L392">            s1 = &quot; and userID = &quot; + uId + &quot; &quot;;</span>
        }

<span class="fc" id="L395">        String s2 = &quot; &quot;;</span>
<span class="pc bpc" id="L396" title="1 of 2 branches missed.">        if (status != -1) {</span>
<span class="fc" id="L397">            s2 = &quot; and status = &quot; + status + &quot; &quot;;</span>
        }

<span class="fc" id="L400">        String sql = &quot;SELECT * FROM [User] WHERE status=1 and username like '%&quot; + uName + &quot;%' &quot; + s1 + &quot; &quot; + s2;</span>
<span class="fc" id="L401">        ResultSet rs = dbConn.getData(sql);</span>
        try {
<span class="pc bpc" id="L403" title="1 of 2 branches missed.">            while (rs.next()) {</span>
<span class="nc" id="L404">                User user = new User(rs.getString(&quot;userID&quot;), rs.getString(&quot;username&quot;),</span>
<span class="nc" id="L405">                        rs.getString(&quot;password&quot;), rs.getString(&quot;email&quot;),</span>
<span class="nc" id="L406">                        rs.getString(&quot;phoneNumber&quot;), rs.getInt(&quot;sell&quot;),</span>
<span class="nc" id="L407">                        rs.getDouble(&quot;wallet&quot;), rs.getString(&quot;fullname&quot;),</span>
<span class="nc" id="L408">                        rs.getString(&quot;publicName&quot;), rs.getString(&quot;address&quot;), rs.getString(&quot;profileImage&quot;),</span>
<span class="nc" id="L409">                        rs.getString(&quot;backgroundImage&quot;), rs.getString(&quot;occupation&quot;),</span>
<span class="nc" id="L410">                        rs.getInt(&quot;gender&quot;), rs.getDate(&quot;DOB&quot;), rs.getString(&quot;bio&quot;),</span>
<span class="nc" id="L411">                        rs.getString(&quot;Facebook&quot;), rs.getString(&quot;Instagram&quot;),</span>
<span class="nc" id="L412">                        rs.getString(&quot;Twitter&quot;), rs.getString(&quot;Youtube&quot;),</span>
<span class="nc" id="L413">                        rs.getInt(&quot;activityPoint&quot;), rs.getInt(&quot;systemRole&quot;),</span>
<span class="nc" id="L414">                        rs.getInt(&quot;status&quot;));</span>
<span class="nc" id="L415">                list.add(user);</span>
<span class="nc" id="L416">            }</span>
<span class="nc" id="L417">        } catch (SQLException ex) {</span>
<span class="nc" id="L418">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L419">        }</span>
<span class="fc" id="L420">        return list;</span>
    }

    public HashMap&lt;User, Role&gt; getAllAuthorizationUser() {
<span class="fc" id="L424">        HashMap&lt;User, Role&gt; map = new HashMap&lt;&gt;();</span>
<span class="fc" id="L425">        UserDAO uDao = new UserDAO();</span>
<span class="fc" id="L426">        RoleDAO rDao = new RoleDAO();</span>
<span class="fc" id="L427">        String sql = &quot;SELECT u.userID, r.roleID FROM [User] u INNER JOIN [Role] r ON u.systemRole = r.roleID  where u.[status]=1&quot;;</span>
<span class="fc" id="L428">        ResultSet rs = dbConn.getData(sql);</span>
        try {
<span class="fc bfc" id="L430" title="All 2 branches covered.">            while (rs.next()) {</span>
<span class="fc" id="L431">                User u = uDao.getUserById(rs.getString(&quot;userID&quot;));</span>
<span class="fc" id="L432">                Role r = rDao.getRoleById(rs.getInt(&quot;roleID&quot;));</span>
<span class="fc" id="L433">                map.put(u, r);</span>
<span class="fc" id="L434">            }</span>
<span class="nc" id="L435">        } catch (SQLException ex) {</span>
<span class="nc" id="L436">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L437">        }</span>
<span class="fc" id="L438">        return map;</span>
    }

    public void updatePassword(String username, String mail, String password) {
<span class="fc" id="L442">        String sql = &quot;UPDATE [User] SET password = ? WHERE username = ? and email = ?&quot;;</span>
        try {
<span class="fc" id="L444">            pre = conn.prepareStatement(sql);</span>
<span class="fc" id="L445">            pre.setString(1, password);</span>
<span class="fc" id="L446">            pre.setString(2, username);</span>
<span class="fc" id="L447">            pre.setString(3, mail);</span>
<span class="fc" id="L448">            pre.executeUpdate();</span>
<span class="nc" id="L449">        } catch (SQLException ex) {</span>
<span class="nc" id="L450">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L451">        }</span>
<span class="fc" id="L452">    }</span>

    public int updateInfoUserByAdmin(User obj) {
<span class="fc" id="L455">        int n = 0;</span>
<span class="fc" id="L456">        String sql = &quot;UPDATE [User] SET username=?, password=?, email=?, phoneNumber=?, sell=?, wallet=?, fullname=?, publicName=?, address=?,&quot;</span>
                + &quot; profileImage=?, backgroundImage=?, occupation=?, gender=?, DOB=?, bio=?, Facebook=?, Instagram=?, Twitter=?, &quot;
                + &quot;Youtube=?, activityPoint=?, systemRole=?, status=?&quot;
                + &quot; where userID=?&quot;;
        try {
<span class="fc" id="L461">            pre = conn.prepareStatement(sql);</span>
<span class="nc" id="L462">            pre.setString(1, obj.getUsername());</span>
<span class="nc" id="L463">            pre.setString(2, obj.getPassword());</span>
<span class="nc" id="L464">            pre.setString(3, obj.getEmail());</span>
<span class="nc" id="L465">            pre.setString(4, obj.getPhoneNumber());</span>
<span class="nc" id="L466">            pre.setInt(5, obj.getSell());</span>
<span class="nc" id="L467">            pre.setDouble(6, obj.getWallet());</span>
<span class="nc" id="L468">            pre.setString(7, obj.getFullname());</span>
<span class="nc" id="L469">            pre.setString(8, obj.getPublicName());</span>
<span class="nc" id="L470">            pre.setString(9, obj.getAddress());</span>
<span class="nc" id="L471">            pre.setString(10, obj.getProfileImage());</span>
<span class="nc" id="L472">            pre.setString(11, obj.getBackgroundImage());</span>
<span class="nc" id="L473">            pre.setString(12, obj.getOccupation());</span>
<span class="nc" id="L474">            pre.setInt(13, obj.getGender());</span>
<span class="nc" id="L475">            pre.setDate(14, obj.getDOB());</span>
<span class="nc" id="L476">            pre.setString(15, obj.getBio());</span>
<span class="nc" id="L477">            pre.setString(16, obj.getFacebook());</span>
<span class="nc" id="L478">            pre.setString(17, obj.getInstagram());</span>
<span class="nc" id="L479">            pre.setString(18, obj.getTwitter());</span>
<span class="nc" id="L480">            pre.setString(19, obj.getYoutube());</span>
<span class="nc" id="L481">            pre.setInt(20, obj.getActivityPoint());</span>
<span class="nc" id="L482">            pre.setInt(21, obj.getSystemRole());</span>
<span class="nc" id="L483">            pre.setInt(22, obj.getStatus());</span>
<span class="nc" id="L484">            pre.setString(23, obj.getUserId());</span>
<span class="nc" id="L485">            n = pre.executeUpdate();</span>
<span class="nc" id="L486">        } catch (SQLException ex) {</span>
<span class="nc" id="L487">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="nc" id="L488">        }</span>
<span class="nc" id="L489">        return n;</span>
    }

    public void depositWalletUser(User obj, double amount) {

<span class="fc" id="L494">        String sql = &quot;UPDATE [User] SET wallet=? where userID=?&quot;;</span>
        try {
<span class="fc" id="L496">            pre = conn.prepareStatement(sql);</span>
<span class="nc" id="L497">            pre.setDouble(1, obj.getWallet() + amount);</span>
<span class="nc" id="L498">            pre.setString(2, obj.getUserId());</span>
<span class="nc" id="L499">            pre.executeUpdate();</span>
<span class="nc" id="L500">        } catch (SQLException ex) {</span>
<span class="nc" id="L501">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="nc" id="L502">        }</span>
<span class="nc" id="L503">    }</span>

    public void withdrawalWalletUser(User obj, double amount) {

<span class="fc" id="L507">        String sql = &quot;UPDATE [User] SET wallet=? where userID=?&quot;;</span>
        try {
<span class="fc" id="L509">            pre = conn.prepareStatement(sql);</span>
<span class="nc" id="L510">            pre.setDouble(1, obj.getWallet() - amount);</span>
<span class="nc" id="L511">            pre.setString(2, obj.getUserId());</span>
<span class="nc" id="L512">            pre.executeUpdate();</span>
<span class="nc" id="L513">        } catch (SQLException ex) {</span>
<span class="nc" id="L514">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="nc" id="L515">        }</span>
<span class="nc" id="L516">    }</span>

    public void updatePublicInfo(User obj) {
<span class="fc" id="L519">        String sql = &quot;UPDATE [User] SET  username=?, [address]=?,&quot;</span>
                + &quot; bio=?, Facebook=?, Instagram=?, Twitter=?, Youtube=? , [password]=?&quot;
                + &quot; where userID=?&quot;;
        try {
<span class="fc" id="L523">            pre = conn.prepareStatement(sql);</span>
<span class="nc" id="L524">            pre.setString(1, obj.getUsername());</span>
<span class="nc" id="L525">            pre.setString(2, obj.getAddress());</span>
<span class="nc" id="L526">            pre.setString(3, obj.getBio());</span>
<span class="nc" id="L527">            pre.setString(4, obj.getFacebook());</span>
<span class="nc" id="L528">            pre.setString(5, obj.getInstagram());</span>
<span class="nc" id="L529">            pre.setString(6, obj.getTwitter());</span>
<span class="nc" id="L530">            pre.setString(7, obj.getYoutube());</span>
<span class="nc" id="L531">            pre.setString(8, obj.getPassword());</span>
<span class="nc" id="L532">            pre.setString(9, obj.getUserId());</span>
<span class="nc" id="L533">            pre.executeUpdate();</span>
<span class="nc" id="L534">        } catch (SQLException ex) {</span>
<span class="nc" id="L535">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="nc" id="L536">        }</span>
<span class="nc" id="L537">    }</span>

    public int updatePrivateInfo(User obj) {
<span class="fc" id="L540">        int n = 0;</span>
<span class="fc" id="L541">        String sql = &quot;UPDATE [User] SET  fullname=?, email=?, phoneNumber=?, [password]=?&quot;</span>
                + &quot; where userID=?&quot;;
        try {
<span class="fc" id="L544">            pre = conn.prepareStatement(sql);</span>
<span class="nc" id="L545">            pre.setString(1, obj.getFullname());</span>
<span class="nc" id="L546">            pre.setString(2, obj.getEmail());</span>
<span class="nc" id="L547">            pre.setString(3, obj.getPhoneNumber());</span>
<span class="nc" id="L548">            pre.setString(4, obj.getPassword());</span>
<span class="nc" id="L549">            pre.setString(5, obj.getUserId());</span>
<span class="nc" id="L550">            n = pre.executeUpdate();</span>
<span class="nc" id="L551">        } catch (SQLException ex) {</span>
<span class="nc" id="L552">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="nc" id="L553">        }</span>
<span class="nc" id="L554">        return n;</span>
    }

    public int updateActivityPoint(User obj, int activityPoint) {
<span class="fc" id="L558">        int n = 0;</span>
<span class="fc" id="L559">        String sql = &quot;UPDATE [User] SET activityPoint=? where userID=?&quot;;</span>
        try {
<span class="fc" id="L561">            pre = conn.prepareStatement(sql);</span>
<span class="fc" id="L562">            pre.setInt(1, activityPoint);</span>
<span class="nc" id="L563">            pre.setString(2, obj.getUserId());</span>
<span class="nc" id="L564">            n = pre.executeUpdate();</span>
<span class="nc" id="L565">        } catch (SQLException ex) {</span>
<span class="nc" id="L566">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="nc" id="L567">        }</span>
<span class="nc" id="L568">        return n;</span>
    }

    public int uploadprofileImage(User obj, String uploadImg) {
<span class="fc" id="L572">        int n = 0;</span>
<span class="fc" id="L573">        String sql = &quot;UPDATE [User] SET profileImage = ? WHERE userID = ?&quot;;</span>
        try {
<span class="fc" id="L575">            pre = conn.prepareStatement(sql);</span>
<span class="fc" id="L576">            pre.setString(1, uploadImg);</span>
<span class="nc" id="L577">            pre.setString(2, obj.getUserId());</span>
<span class="nc" id="L578">            n = pre.executeUpdate();</span>
<span class="nc" id="L579">        } catch (SQLException ex) {</span>
<span class="nc" id="L580">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="nc" id="L581">        }</span>
<span class="nc" id="L582">        return n;</span>
    }

    public int uploadBackgroundImage(User obj, String uploadImg) {
<span class="fc" id="L586">        int n = 0;</span>
<span class="fc" id="L587">        String sql = &quot;UPDATE [User] SET backgroundImage = ? WHERE userID = ?&quot;;</span>
        try {
<span class="fc" id="L589">            pre = conn.prepareStatement(sql);</span>
<span class="fc" id="L590">            pre.setString(1, uploadImg);</span>
<span class="nc" id="L591">            pre.setString(2, obj.getUserId());</span>
<span class="nc" id="L592">            n = pre.executeUpdate();</span>
<span class="nc" id="L593">        } catch (SQLException ex) {</span>
<span class="nc" id="L594">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="nc" id="L595">        }</span>
<span class="nc" id="L596">        return n;</span>
    }
    
    public HashMap&lt;User, Role&gt; getAllPagingUserHashMap(int index, int numOfRow, String search) {
<span class="fc" id="L600">        HashMap&lt;User, Role&gt; map = new HashMap&lt;&gt;();</span>
<span class="fc" id="L601">        UserDAO uDao = new UserDAO();</span>
<span class="fc" id="L602">        RoleDAO rDao = new RoleDAO();</span>
<span class="fc" id="L603">        String xSql = &quot;declare @PageNo INT =&quot; + index + &quot;\n&quot;</span>
                + &quot;declare @PageSize INT=&quot; + numOfRow + &quot;\n&quot;
                + &quot;SELECT * from(\n&quot;
                + &quot;SELECT u.userID, r.roleID,\n&quot;
                + &quot;ROW_NUMBER() over (order by userID) as RowNum\n&quot;
                + &quot;  FROM [Bmazon].[dbo].[User] u INNER JOIN [Role] r ON u.systemRole = r.roleID where u.fullname like '%&quot; + search + &quot;%' or r.roleName like '%&quot; + search + &quot;%')T\n&quot;
                + &quot;where T.RowNum between ((@PageNo-1)*@PageSize)+1 and (@PageNo*@PageSize)&quot;;
<span class="fc" id="L610">        ResultSet rs = dbConn.getData(xSql);</span>
        try {
<span class="pc bpc" id="L612" title="1 of 2 branches missed.">            while (rs.next()) {</span>
<span class="nc" id="L613">                User u = uDao.getUserById(rs.getString(&quot;userID&quot;));</span>
<span class="nc" id="L614">                Role r = rDao.getRoleById(rs.getInt(&quot;roleID&quot;));</span>
<span class="nc" id="L615">                map.put(u, r);</span>
<span class="nc" id="L616">            }</span>
<span class="nc" id="L617">        } catch (SQLException ex) {</span>
<span class="nc" id="L618">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L619">        }</span>
<span class="fc" id="L620">        return map;</span>
    }
    
    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Didn't use. Click on the + sign on the left to edit the code.&quot;&gt;
    public User getUserLogin(String username, String password) {
<span class="fc" id="L625">        String sql = &quot;SELECT * FROM [User] WHERE username = ? and password = ? and status = 1&quot;;</span>
        try {
<span class="fc" id="L627">            pre = conn.prepareStatement(sql);</span>
<span class="fc" id="L628">            pre.setString(1, username);</span>
<span class="fc" id="L629">            pre.setString(2, password);</span>
<span class="fc" id="L630">            ResultSet rs = pre.executeQuery();</span>
<span class="pc bpc" id="L631" title="1 of 2 branches missed.">            if (rs.next()) {</span>
<span class="nc" id="L632">                User user = new User(rs.getString(&quot;userID&quot;), rs.getString(&quot;username&quot;),</span>
<span class="nc" id="L633">                        rs.getString(&quot;password&quot;), rs.getString(&quot;email&quot;),</span>
<span class="nc" id="L634">                        rs.getString(&quot;phoneNumber&quot;), rs.getInt(&quot;sell&quot;),</span>
<span class="nc" id="L635">                        rs.getDouble(&quot;wallet&quot;), rs.getString(&quot;fullname&quot;),</span>
<span class="nc" id="L636">                        rs.getString(&quot;publicName&quot;), rs.getString(&quot;address&quot;), rs.getString(&quot;profileImage&quot;),</span>
<span class="nc" id="L637">                        rs.getString(&quot;backgroundImage&quot;), rs.getString(&quot;occupation&quot;),</span>
<span class="nc" id="L638">                        rs.getInt(&quot;gender&quot;), rs.getDate(&quot;DOB&quot;), rs.getString(&quot;bio&quot;),</span>
<span class="nc" id="L639">                        rs.getString(&quot;Facebook&quot;), rs.getString(&quot;Instagram&quot;),</span>
<span class="nc" id="L640">                        rs.getString(&quot;Twitter&quot;), rs.getString(&quot;Youtube&quot;),</span>
<span class="nc" id="L641">                        rs.getInt(&quot;activityPoint&quot;), rs.getInt(&quot;systemRole&quot;),</span>
<span class="nc" id="L642">                        rs.getInt(&quot;status&quot;));</span>
<span class="nc" id="L643">                return user;</span>
            }
<span class="nc" id="L645">        } catch (SQLException ex) {</span>
<span class="nc" id="L646">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L647">        }</span>
<span class="fc" id="L648">        return null;</span>
    }

    public User getEmailLogin(String email, String password) {
<span class="fc" id="L652">        String sql = &quot;SELECT * FROM [User] WHERE email = ? and password = ? and status = 1&quot;;</span>
        try {
<span class="fc" id="L654">            pre = conn.prepareStatement(sql);</span>
<span class="fc" id="L655">            pre.setString(1, email);</span>
<span class="fc" id="L656">            pre.setString(2, password);</span>
<span class="fc" id="L657">            ResultSet rs = pre.executeQuery();</span>
<span class="pc bpc" id="L658" title="1 of 2 branches missed.">            if (rs.next()) {</span>
<span class="nc" id="L659">                User user = new User(rs.getString(&quot;userID&quot;), rs.getString(&quot;username&quot;),</span>
<span class="nc" id="L660">                        rs.getString(&quot;password&quot;), rs.getString(&quot;email&quot;),</span>
<span class="nc" id="L661">                        rs.getString(&quot;phoneNumber&quot;), rs.getInt(&quot;sell&quot;),</span>
<span class="nc" id="L662">                        rs.getDouble(&quot;wallet&quot;), rs.getString(&quot;fullname&quot;),</span>
<span class="nc" id="L663">                        rs.getString(&quot;publicName&quot;), rs.getString(&quot;address&quot;), rs.getString(&quot;profileImage&quot;),</span>
<span class="nc" id="L664">                        rs.getString(&quot;backgroundImage&quot;), rs.getString(&quot;occupation&quot;),</span>
<span class="nc" id="L665">                        rs.getInt(&quot;gender&quot;), rs.getDate(&quot;DOB&quot;), rs.getString(&quot;bio&quot;),</span>
<span class="nc" id="L666">                        rs.getString(&quot;Facebook&quot;), rs.getString(&quot;Instagram&quot;),</span>
<span class="nc" id="L667">                        rs.getString(&quot;Twitter&quot;), rs.getString(&quot;Youtube&quot;),</span>
<span class="nc" id="L668">                        rs.getInt(&quot;activityPoint&quot;), rs.getInt(&quot;systemRole&quot;),</span>
<span class="nc" id="L669">                        rs.getInt(&quot;status&quot;));</span>
<span class="nc" id="L670">                return user;</span>
            }
<span class="nc" id="L672">        } catch (SQLException ex) {</span>
<span class="nc" id="L673">            Logger.getLogger(UserDAO.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="fc" id="L674">        }</span>
<span class="fc" id="L675">        return null;</span>
    }
// &lt;/editor-fold&gt;
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>